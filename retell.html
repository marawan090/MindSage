<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ØªØ´ØºÙŠÙ„ Retell Agent Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹</title>
</head>
<body>
  <h2>Retell Voice Agent</h2>

  <button onclick="startCall()">â–¶ï¸ Ø¨Ø¯Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©</button>
  <button onclick="stopCall()">â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¬Ù„Ø³Ø©</button>

  <p id="status">âšª ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ´ØºÙŠÙ„...</p>

  <!-- ØªØ¶Ù…ÙŠÙ† Ù…ÙƒØªØ¨Ø© SDK -->
  <script src="https://cdn.retellai.com/web-sdk/index.min.js"></script>

  <script>
    // Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
    const agentId = "agent_ac97619bfb93997ccf71cff3d5";
    const apiKey = "key_9d940c8b806dd4757857040e9e74";

    let callId = null;
    let webCall = null;

    async function startCall() {
      document.getElementById("status").innerText = "â³ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø©...";

      try {
        const response = await fetch("https://api.retellai.com/v2/create-web-call", {
          method: "POST",
          headers: {
            "Authorization": `Bearer ${apiKey}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            agent_id: agentId
          })
        });

        const data = await response.json();

        if (!data.call_id) {
          document.getElementById("status").innerText = "âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø©.";
          console.error("API Error:", data);
          return;
        }

        callId = data.call_id;
        webCall = await window.retellWebSDK.joinCall({ callId });

        document.getElementById("status").innerText = "ğŸŸ¢ Ø§Ù„Ø¬Ù„Ø³Ø© ØªØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†.";
        console.log("âœ… Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø© Ø¨Ø¯Ø£Øª Ø¨Ù†Ø¬Ø§Ø­");
      } catch (err) {
        document.getElementById("status").innerText = "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„.";
        console.error(err);
      }
    }

    async function stopCall() {
      if (webCall) {
        await webCall.leaveCall();
        document.getElementById("status").innerText = "ğŸ”´ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¬Ù„Ø³Ø©.";
        console.log("â›” Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø© ØªÙˆÙ‚ÙØª");
      } else {
        document.getElementById("status").innerText = "âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬Ù„Ø³Ø© Ù†Ø´Ø·Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§.";
      }
    }
  </script>
</body>
</html>
